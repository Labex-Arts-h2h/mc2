{% extends 'base.html.twig' %}

{%  block stylesheets %}
    {{ parent() }}
    <style>
        .card{
            padding: 20px;
        }
    </style>
{% endblock %}

{% block body %}

    <section class="container">
        <h1>Dance : {{ myDance.title }}</h1>

        <article class="card">

            <p>There are  numbers in films with {{ myDance.title }} dance sub-genre.</p>

            <div id="diagram"></div>

        </article>

        <article>
            <h2>Dancing type</h2>

            {% for item in dancings  %}
                <a href=""><span class="chip">{{ item.title }} ({{ item.nb }})</span></a>
            {% endfor %}
        </article>

        <article>
            <h2>Dance content</h2>

            {% for item in contents %}
                <a href=""><span class="chip">{{ item.title }}({{ item.nb }})</span></a>
            {% endfor %}

        </article>

        <article>
            <h2>Dancing ensemble</h2>

            {% for item in dancembles %}
                <a href=""><span class="chip">{{ item.title }}({{ item.nb }})</span></a>
            {% endfor %}
        </article>

        <article>
            <h2>Costumes</h2>

            {% for item in costumes %}
                <a href=""><span class="chip">{{ item.title }}({{ item.nb }})</span></a>
            {% endfor %}
        </article>

        <article>
            <h2>Exoticism</h2>

            {% for item in exoticisms %}
                <a href=""><span class="chip">{{ item.title }}({{ item.nb }})</span></a>
            {% endfor %}
        </article>

        <article>
            <h2>List of movies with {{ myDance.title }} dance</h2>

            <div class="liste row">
                {% for film in filmsByDance  %}
                    <div class="card horizontal col s4 ">
                        {% if film.imdb %}
                            <img src="http://img.omdbapi.com/?i={{ film.imdb }}&apikey=1733f6a&h=100" alt="poster">
                        {% endif %}
                        <a href="{{ path('film', {'filmId' : film.filmId}) }}"><h3>{{ film.title }}</h3></a>
                    </div>
                {% endfor %}
            </div>
        </article>

        <h2>List of numbers with {{ myDance.title }} dance</h2>

        <table class="striped">
        {% for item in numbers %}
            <tr>
                <td>{{ item.number }}</td>
                <td>{{ item.film }}</td>
            </tr>
        {% endfor %}
        </table>

        {#<article>#}
        {#<div id="chart_div"></div>#}

        {#</article>#}

        {#<article>#}
            {#<h2>List of numbers with {% for item in dance %}{{ item.title }}{% endfor %} dance</h2>#}

            {#<div class="liste row">#}
                {#<table class="striped">#}
                    {#<tr>#}
                        {#<th>number</th>#}
                        {#<th>Released</th>#}
                        {#<th>film</th>#}

                    {#</tr>#}
                    {#{% for number in numbers  %}#}
                        {#<tr>#}
                            {#<td><a href="{{ path('number', {'numberId' : number.numberId}) }}">{{ number.title }}</a></td>#}
                            {#<td>{{ number.released }}</td>#}
                            {#<td>{{ number.filmTitle }}</td>#}

                        {#</tr>#}
                    {#{% endfor %}#}
                {#</table>#}
            {#</div>#}
        {#</article>#}
    </section>

{% endblock %}


{% block javascripts %}

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        {#google.charts.load("current", {packages:["corechart"]});#}
        {#google.charts.setOnLoadCallback(drawChart);#}
        {#function drawChart() {#}
            {#var data = google.visualization.arrayToDataTable([#}
                {#['Name', 'Occurences'],#}
                {#{% for genre in genres %}#}
                {#['{{ genre.title }}', {{ genre.nb }}],#}
                {#{% endfor %}#}
            {#]);#}

            {#var options = {#}
                {#title: 'Ratio',#}
                {#pieHole: 0.4,#}
            {#};#}

            {#var chart = new google.visualization.PieChart(document.getElementById('chart_div'));#}
            {#chart.draw(data, options);#}

        {#}#}

        google.charts.load('current', {packages: ['corechart', 'line']});
        google.charts.setOnLoadCallback(drawBasic);
        function drawBasic() {
            //diagram
            var data = new google.visualization.DataTable();
            data.addColumn('number', 'Year');
            data.addColumn('number', 'Occurence');

            data.addRows([
                {% for item in danceSubgenreByYear %}
                [{{ item.released }}, {{ item.nb }}],
                {% endfor %}
            ]);

            var options = {
                hAxis: {
                    title: 'Years'
                },
                vAxis: {
                    title: 'Occurences'
                },
            };


            var chart = new google.visualization.LineChart(document.getElementById('diagram'));

            chart.draw(data, options);
        }

    </script>

{% endblock %}