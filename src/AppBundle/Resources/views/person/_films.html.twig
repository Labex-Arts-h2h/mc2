<div id="films">

  {% if person.numbersChoregrapher|length == 0 and person.numbersArranger|length == 0 and person.numbersDirector|length == 0 and person.numbersPerformer|length == 0 and person.numbersFigurant|length == 0 and person.songLyricist|length == 0 and person.songComposer|length == 0 %}
    <div class="no_info center">
      <h3>No result</h3>
      <p> {{ person.name }} is not involved in any film yet </p>
    </div>
  {% else %}
    <h2>All films linked to {{ person.name }}</h2>
  {% endif %}

  <div class="section-films__films section-films__films--margin-bottom">

    {% set tabAll = [] %}
    {% for item in person.numbersChoregrapher  %}
      {% if item.film.filmId not in tabAll %}
        {% set tabAll = tabAll|merge([item.film.filmId]) %}
        <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
          <h4 class="section-films__film-name">{{ item.film }}</h4>

          <div class="section-films__centered-cropped">
            <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
          </div>
        </a>
      {% endif %}
    {% endfor %}

    {% for item in person.numbersArranger  %}
      {% if item.film.filmId not in tabAll %}
        {% set tabAll = tabAll|merge([item.film.filmId]) %}
        <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
          <h4 class="section-films__film-name">{{ item.film }}</h4>
          <div class="section-films__centered-cropped">
            <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
          </div>
        </a>
      {% endif %}
    {% endfor %}
    {% for item in person.numbersDirector  %}
      {% if item.film.filmId not in tabAll %}
        {% set tabAll = tabAll|merge([item.film.filmId]) %}
        <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
          <h4 class="section-films__film-name">{{ item.film }}</h4>
          <div class="section-films__centered-cropped">
            <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
          </div>
        </a>
      {% endif %}
    {% endfor %}
    {% for item in person.numbersPerformer  %}
      {% if item.film.filmId not in tabAll %}
        {% set tabAll = tabAll|merge([item.film.filmId]) %}
        <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
          <h4 class="section-films__film-name">{{ item.film }}</h4>
          <div class="section-films__centered-cropped">
            <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
          </div>
        </a>
      {% endif %}
    {% endfor %}
    {% for item in person.numbersFigurant  %}
      {% if item.film.filmId not in tabAll %}
        {% set tabAll = tabAll|merge([item.film.filmId]) %}
        <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
          <h4 class="section-films__film-name">{{ item.film }}</h4>
          <div class="section-films__centered-cropped">
            <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
          </div>
        </a>
      {% endif %}
    {% endfor %}
    {% for item in person.songLyricist  %}
      {% for itemNumber in item.number  %}
        {% if itemNumber.film.filmId not in tabAll %}
          {% set tabAll = tabAll|merge([itemNumber.film.filmId]) %}
          <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : itemNumber.film.filmId}) }}">
            <h4 class="section-films__film-name">{{ itemNumber.film }} ({{ itemNumber.film.released }})</h4>
            <div class="section-films__centered-cropped">
              <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
            </div>
          </a>
        {% endif %}
      {% endfor %}
    {% endfor %}

    {% for item in person.songComposer  %}
      {% for itemNumber in item.number  %}
        {% if itemNumber.film.filmId not in tabAll %}
          {% set tabAll = tabAll|merge([itemNumber.film.filmId]) %}
          <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : itemNumber.film.filmId}) }}">
            <h4 class="section-films__film-name">{{ itemNumber.film }} ({{ itemNumber.film.released }})</h4>
            <div class="section-films__centered-cropped">
              <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
            </div>
          </a>
        {% endif %}
      {% endfor %}
    {% endfor %}

  </div>


  {% if person.numbersChoregrapher|length > 0 %}
    <h2>Film(s) where {{ person.name }} is choreographer of at least one number</h2>
    <div class="section-films__films section-films__films--margin-bottom">
      {% set tabChoreo = [] %}
      {% for item in person.numbersChoregrapher  %}
        {% if item.film.filmId not in tabChoreo %}
        {% set tabChoreo = tabChoreo|merge([item.film.filmId]) %}
        <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
          <h4 class="section-films__film-name">{{ item.film }}</h4>
          <div class="section-films__centered-cropped">
            <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
          </div>
        </a>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}

  {% if person.numbersArranger|length > 0 %}
    <h2>Film(s) where {{ person.name }} is arranger of at least one number</h2>
    <div class="section-films__films section-films__films--margin-bottom">
      {% set tabArranger = [] %}
      {% for item in person.numbersArranger  %}
        {% if item.film.filmId not in tabArranger %}
          {% set tabArranger = tabArranger|merge([item.film.filmId]) %}
          <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
            <h4 class="section-films__film-name">{{ item.film }}</h4>
            <div class="section-films__centered-cropped">
              <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}


  {% if person.numbersDirector|length > 0 %}
    <h2>Film(s) where {{ person.name }} is director of at least one number</h2>
    <div class="section-films__films section-films__films--margin-bottom">
      {% set tabDirector = [] %}
      {% for item in person.numbersDirector  %}
        {% if item.film.filmId not in tabDirector %}
          {% set tabDirector = tabDirector|merge([item.film.filmId]) %}
          <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
            <h4 class="section-films__film-name">{{ item.film }}</h4>
            <div class="section-films__centered-cropped">
              <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}


  {% if person.numbersPerformer|length > 0 %}
    <h2>Film(s) where {{ person.name }} is a performer in at least one number</h2>
    <div class="section-films__films section-films__films--margin-bottom">
      {% set tabPerformer = [] %}
      {% for item in person.numbersPerformer  %}
        {% if item.film.filmId not in tabPerformer %}
          {% set tabPerformer = tabPerformer|merge([item.film.filmId]) %}
          <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">
            <h4 class="section-films__film-name">{{ item.film }}</h4>
            <div class="section-films__centered-cropped">
              <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}


  {#{% if person.numbersFigurant|length > 0 %}#}
    {#<h2>Film(s) where {{ person.name }} doesn't participate in at least one number</h2>#}
    {#<div class="section-films__films section-films__films--margin-bottom">#}
      {#{% set tabFigurant = [] %}#}
      {#{% for item in person.numbersFigurant  %}#}
        {#{% if item.film.filmId not in tabFigurant %}#}
          {#{% set tabFigurant = tabFigurant|merge([item.film.filmId]) %}#}
          {#<a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : item.film.filmId}) }}">#}
            {#<h4 class="section-films__film-name">{{ item.film }}</h4>#}
            {#<div class="section-films__centered-cropped">#}
              {#<img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">#}
            {#</div>#}
          {#</a>
        {#{% endif %}#}
      {#{% endfor %}#}
    {#</div>#}
  {#{% endif %}#}


  {% if person.songLyricist|length > 0 %}
    <h2>Film(s) where {{ person.name }} is lyricist</h2>
    <div class="section-films__films section-films__films--margin-bottom">
      {% set tabLyricist = [] %}
      {% for item in person.songLyricist  %}
        {% for itemNumber in item.number  %}
          {% if itemNumber.film.filmId not in tabLyricist %}
            {% set tabLyricist = tabLyricist|merge([itemNumber.film.filmId]) %}
            <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : itemNumber.film.filmId}) }}">
              <h4 class="section-films__film-name">{{ itemNumber.film }} ({{ itemNumber.film.released }})</h4>
              <div class="section-films__centered-cropped">
                <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
              </div>
            </a>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </div>
  {% endif %}

  {% if person.songComposer|length > 0 %}

    <h2>Film(s) where {{ person.name }} is composer</h2>
    <div class="section-films__films section-films__films--margin-bottom">

      {% set tabComposer = [] %}
      {% for item in person.songComposer  %}
        {% for itemNumber in item.number  %}
          {% if itemNumber.film.filmId not in tabComposer %}
            {% set tabComposer = tabComposer|merge([itemNumber.film.filmId]) %}
            <a class="section-films__film section-films__film--6" href="{{ path('film', {'filmId' : itemNumber.film.filmId}) }}">
              <h4 class="section-films__film-name">{{ itemNumber.film }} ({{ itemNumber.film.released }})</h4>
              <div class="section-films__centered-cropped">
                <img class="section-films__film-poster" src="{{ asset('img/films/'~ item.film.idImdb ~'.jpg') }}" alt="poster">
              </div>
            </a>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </div>
  {% endif %}
</div>

{% block javascript %}

    <script>
        function standby() {
//            document.getElementById('foo').src = 'https://www.google.com/images/srpr/logo11w.png'

        }
    </script>

{% endblock %}
